#Detect the crafting
execute if score @s[tag=backpack_crafting_on] SlotResult matches 0 run function backpack:custom_crafting_recipes/finish_backpack_craft
execute if score @s Slot7 matches 0 if score @s SlotResult matches 0 if block ~ ~ ~ chest{Items: [{Slot: 0b, id: "minecraft:leather"}, {Slot: 1b, id: "minecraft:leather"}, {Slot: 2b, id: "minecraft:leather"}, {Slot: 9b, id: "minecraft:leather"}, {Slot: 10b, id: "minecraft:chest"}, {Slot: 11b, id: "minecraft:leather"}, {Slot: 18b, id: "minecraft:gold_ingot"}, {Slot: 20b, id: "minecraft:gold_ingot"}]} run tag @s add backpack_crafting_on
execute if score @s Slot7 matches 0 if score @s SlotResult matches 0 if block ~ ~ ~ chest{Items: [{Slot: 0b, id: "minecraft:leather"}, {Slot: 1b, id: "minecraft:leather"}, {Slot: 2b, id: "minecraft:leather"}, {Slot: 9b, id: "minecraft:leather"}, {Slot: 10b, id: "minecraft:chest"}, {Slot: 11b, id: "minecraft:leather"}, {Slot: 18b, id: "minecraft:gold_ingot"}, {Slot: 20b, id: "minecraft:gold_ingot"}]} run replaceitem block ~ ~ ~ container.13 minecraft:wooden_sword{HideFlags:39,Unbreakable:1b,AttributeModifiers:[{AttributeName:"generic.attackSpeed",Name:"generic.attackSpeed",Amount:-1,Operation:0,UUIDLeast:954288,UUIDMost:29349},{AttributeName:"generic.attackDamage",Name:"generic.attackDamage",Amount:-1,Operation:0,UUIDLeast:197681,UUIDMost:219688}],item_tags:["backpack"],backpack_tags:{ID:0,Color:1b},CustomModelData:9161,display:{Name:"{\"translate\":\"item.backpacks.backpack\",\"color\":\"yellow\",\"italic\":\"false\"}",Lore:["{\"translate\":\"lore.backpacks.backpack_line_1\",\"color\":\"white\",\"italic\":false}","{\"translate\":\"lore.backpacks.backpack_line_2\",\"color\":\"white\",\"italic\":false}","{\"translate\":\"lore.backpacks.backpack_line_3\",\"color\":\"white\",\"italic\":false}","{\"translate\":\"lore.backpacks.backpack_line_4\",\"color\":\"white\",\"italic\":false}"]}}
function backpack:custom_crafting_recipes/get_slot_amount
execute store result score @s SlotResult run data get block ~ ~ ~ Items[{Slot:13b}].Count
execute if score @s[tag=backpack_crafting_on] Slot7 matches 1.. run function backpack:custom_crafting_recipes/remove_output
execute if entity @s[tag=backpack_crafting_on] unless block ~ ~ ~ chest{Items: [{Slot: 0b, id: "minecraft:leather"}, {Slot: 1b, id: "minecraft:leather"}, {Slot: 2b, id: "minecraft:leather"}, {Slot: 9b, id: "minecraft:leather"}, {Slot: 10b, id: "minecraft:chest"}, {Slot: 11b, id: "minecraft:leather"}, {Slot: 18b, id: "minecraft:gold_ingot"}, {Slot: 20b, id: "minecraft:gold_ingot"}]} run function backpack:custom_crafting_recipes/remove_output
execute store result score @s SlotResult run data get block ~ ~ ~ Items[{Slot:13b}].Count
execute if score @s[tag=backpack_crafting_on] SlotResult matches 0 run function backpack:custom_crafting_recipes/finish_backpack_craft
execute store result score @s SlotResult run data get block ~ ~ ~ Items[{Slot:13b}].Count