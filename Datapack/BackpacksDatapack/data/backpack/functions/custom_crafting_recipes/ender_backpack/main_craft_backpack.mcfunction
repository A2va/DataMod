#Detect the crafting
execute if score @s[tag=ebackpack_crafting_on] ESlotResult matches 0 run function backpack:custom_crafting_recipes/ender_backpack/finish_backpack_craft
execute if score @s ESlotResult matches 0 if block ~ ~ ~ chest{Items: [{Slot: 0b, id: "minecraft:obsidian"}, {Slot: 1b, id: "minecraft:obsidian"}, {Slot: 2b, id: "minecraft:obsidian"}, {Slot: 9b, id: "minecraft:obsidian"}, {Slot: 10b, id: "minecraft:chest"}, {Slot: 11b, id: "minecraft:obsidian"}, {Slot: 18b, id: "minecraft:gold_ingot"}, {Slot: 19b, id: "minecraft:ender_eye"}, {Slot: 20b, id: "minecraft:gold_ingot"}]} run tag @s add ebackpack_crafting_on
execute if score @s ESlotResult matches 0 if block ~ ~ ~ chest{Items: [{Slot: 0b, id: "minecraft:obsidian"}, {Slot: 1b, id: "minecraft:obsidian"}, {Slot: 2b, id: "minecraft:obsidian"}, {Slot: 9b, id: "minecraft:obsidian"}, {Slot: 10b, id: "minecraft:chest"}, {Slot: 11b, id: "minecraft:obsidian"}, {Slot: 18b, id: "minecraft:gold_ingot"}, {Slot: 19b, id: "minecraft:ender_eye"}, {Slot: 20b, id: "minecraft:gold_ingot"}]} run replaceitem block ~ ~ ~ container.13 minecraft:wooden_sword{HideFlags:39,Unbreakable:1b,AttributeModifiers:[{AttributeName:"generic.attackSpeed",Name:"generic.attackSpeed",Amount:-1,Operation:0,UUIDLeast:954288,UUIDMost:29349},{AttributeName:"generic.attackDamage",Name:"generic.attackDamage",Amount:-1,Operation:0,UUIDLeast:197681,UUIDMost:219688}],item_tags:["ender_backpack"],CustomModelData:9166,display:{Name:"{\"translate\":\"item.backpacks.ender_backpack\",\"color\":\"dark_purple\",\"italic\":\"false\"}",Lore:["{\"translate\":\"lore.backpacks.backpack_line_1\",\"color\":\"white\",\"italic\":false}","{\"translate\":\"lore.backpacks.backpack_line_2\",\"color\":\"white\",\"italic\":false}","{\"translate\":\"lore.backpacks.backpack_line_3\",\"color\":\"white\",\"italic\":false}","{\"translate\":\"lore.backpacks.backpack_line_4\",\"color\":\"white\",\"italic\":false}","{\"text\":\" \",\"color\":\"white\",\"italic\":false}","{\"translate\":\"lore.backpacks.ender_backpack_line_1\",\"color\":\"white\",\"italic\":false}","{\"translate\":\"lore.backpacks.ender_backpack_line_2\",\"color\":\"white\",\"italic\":false}","{\"translate\":\"lore.backpacks.ender_backpack_line_3\",\"color\":\"white\",\"italic\":false}"]}}
function backpack:custom_crafting_recipes/ender_backpack/get_slot_amount
execute store result score @s ESlotResult run data get block ~ ~ ~ Items[{Slot:13b}].Count
execute if entity @s[tag=ebackpack_crafting_on] unless block ~ ~ ~ chest{Items: [{Slot: 0b, id: "minecraft:obsidian"}, {Slot: 1b, id: "minecraft:obsidian"}, {Slot: 2b, id: "minecraft:obsidian"}, {Slot: 9b, id: "minecraft:obsidian"}, {Slot: 10b, id: "minecraft:chest"}, {Slot: 11b, id: "minecraft:obsidian"}, {Slot: 18b, id: "minecraft:gold_ingot"}, {Slot: 19b, id: "minecraft:ender_eye"}, {Slot: 20b, id: "minecraft:gold_ingot"}]} run function backpack:custom_crafting_recipes/ender_backpack/remove_output
execute store result score @s ESlotResult run data get block ~ ~ ~ Items[{Slot:13b}].Count
execute if score @s[tag=ebackpack_crafting_on] ESlotResult matches 0 run function backpack:custom_crafting_recipes/ender_backpack/finish_backpack_craft
execute store result score @s ESlotResult run data get block ~ ~ ~ Items[{Slot:13b}].Count